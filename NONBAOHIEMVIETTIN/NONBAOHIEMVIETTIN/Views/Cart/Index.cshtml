@using NONBAOHIEMVIETTIN.Models
@model List<CartItem>
@{
    ViewBag.Title = "Giỏ hàng";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var acc = Session["account"] as accounts;
    ViewBag.Description = "Giỏ hàng nhập thông tin chi tiết và phương thức thanh toán trước khi xác nhận đặt hàng.";
    ViewBag.Url = "https://" + HttpContext.Current.Request.Url.Host.ToString().Trim().ToLower() + HttpContext.Current.Request.RawUrl.ToString().Trim().ToLower();
    ViewBag.Image = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSfw1kOyHknL0xB340n2katDgkq7VdArKieJw&usqp=CAU";
}
@section scripts{
    <script src="~/assets/client/json/data.json?@TempData["Version"]"></script>
    <script src="~/assets/client/js/code/api.js?@TempData["Version"]"></script>
    <script src="~/assets/client/js/code/bank.js?@TempData["Version"]"></script>
}
@section styles{
    <style>
        select {
            width: 100%;
            height: 40px;
            -webkit-tap-highlight-color: transparent;
            background-color: #fff;
            border-radius: 5px;
            border: solid 1px #e8e8e8;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            clear: both;
            cursor: pointer;
            display: block;
            float: left;
            font-family: inherit;
            font-size: 14px;
            font-weight: normal;
            height: 42px;
            line-height: 40px;
            outline: none;
            padding-left: 18px;
            padding-right: 30px;
            position: relative;
            text-align: left !important;
            -webkit-transition: all 0.2s ease-in-out;
            transition: all 0.2s ease-in-out;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            white-space: nowrap;
        }

            select option {
                font-size: 16px;
            }

        .bank-title {
            display: block;
            text-align: center;
            color: unset !important;
        }
    </style>
    <link href="~/assets/client/css/bank.css" rel="stylesheet" />
}
<!--breadcrumbs area start-->
<div class="breadcrumbs_area">
    <div class="row">
        <div class="col-12">
            <div class="breadcrumb_content">
                <ul>
                    <li><a href="/">Trang chủ</a></li>
                    <li><i class="fa fa-angle-right"></i></li>
                    <li>Giỏ hàng</li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!--breadcrumbs area end-->
<div class="img-cart" style="display:flex;justify-content:center;padding:24px 0;">
    <img src="~/assets/images/cart/no-cart.png" />
</div>
@if (Model == null || Model.Count() == 0)
{

    <script>
        $(function () {
            $('.img-cart').show();
        });
    </script>

}
else
{
    <script>
        $(function () {
            $('.img-cart').hide();
        });
    </script>
    <!--shopping cart area start -->
    <div class="shopping_cart_area">
        <div class="row lstcart">
            <div class="col-12">
                <div class="table_desc">
                    <div class="cart_page table-responsive">
                        <table class="w-100">
                            <thead>
                                <tr>
                                    <th class="product_remove">Công cụ</th>
                                    <th class="product_thumb">Hình ảnh</th>
                                    <th class="product_name">Tên sản phẩm</th>
                                    <th class="product-price">Giá</th>
                                    <th class="product_quantity">Số lượng</th>
                                    <th class="product_total">Thành tiền</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model)
                                {
                                    <tr class="cart-@item.Product.id">
                                        <td class="product_remove"><a href="" class="deletecart" data-id="@item.Product.id"><i class="fa fa-trash-o"></i></a></td>
                                        <td class="product_thumb"><a href="/chi-tiet/@(item.Product.alias)"><img style="width:70px" src="/@item.Product.image" alt=""></a></td>
                                        <td class="product_name"><a href="/chi-tiet/@(item.Product.alias)">@item.Product.name</a></td>
                                        @if (item.Product.promationprice > 0)
                                        {
                                            <td class="product-price">@Libary.Instances.convertVND(item.Product.promationprice.ToString())</td>
                                        }
                                        else
                                        {
                                            <td class="product-price">@Libary.Instances.convertVND(item.Product.price.ToString())</td>

                                        }
                                        <td class="product_quantity"><input data-val="@item.Quantity" class="txtquantity-lstcart" min="0" data-id="@item.Product.id" max="100" value="@item.Quantity" type="number"></td>
                                        <td class="product_total" id="total-@item.Product.id">@Libary.Instances.convertVND((item.Quantity * (item.Product.promationprice > 0 ? item.Product.promationprice : item.Product.price)).ToString())</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                    <div class="cart_submit">
                        <div>
                            <div class="cart_subtotal">
                                <p>Tổng sản phẩm</p>
                                <p class="cart_amount sum_quantity">@Model.Sum(x => x.Quantity)</p>
                            </div>
                            <a></a>
                            <div class="cart_subtotal">
                                <p>Tổng tiền</p>
                                <p class="cart_amount sum_money">@Libary.Instances.convertVND(Model.Sum(x => x.Quantity * (x.Product.promationprice > 0 ? x.Product.promationprice : x.Product.price)).ToString())</p>
                            </div>
                            <button data-toggle="collapse" data-target="#detail" type="submit">Đặt hàng</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--coupon code area start-->
        <div id="detail" class="coupon_area collapse">
            <div class="row">
                <div class="col-lg-12 col-md-12">
                    <!--Checkout page section-->
                    <div class="Checkout_section p-0 ">
                        <div class="checkout_form coupon_code ">
                            <h3>Thông tin chi tiết</h3>
                            <div class="row coupon_inner">
                                <div class="col-lg-6 col-md-12 mb-30">
                                    <label for="cart-fullname">Họ tên <span>*</span></label>
                                    <input id="cart-fullname" placeholder="Nhập vào họ tên" type="text" value="@acc.fullname">
                                </div>
                                <div class="col-lg-6 col-md-12 mb-30">
                                    <label for="cart-phone">Số điện thoại<span>*</span></label>
                                    <input id="cart-phone" placeholder="Nhập vào số điện thoại" value="@acc.phone" type="text">
                                </div>
                                <div class="col-lg-6 col-md-12 mb-30">
                                    <label for="cart-email"> Email <span>*</span></label>
                                    <input id="cart-email" placeholder="Nhập vào email" value="@acc.email" type="text">
                                </div>
                                <div class="col-lg-6 col-md-12 mb-30">
                                    <label for="province">Tỉnh <span>*</span></label>
                                    <select name="province" id="province">
                                        <option value="-1">Chọn tỉnh thành</option>
                                    </select>
                                </div>
                                <div class="col-lg-6 col-md-12 mb-30">
                                    <label for="district">Quận/Huyện <span>*</span></label>
                                    <select name="district" id="district">
                                        <option value="-1">Chọn quận/huyện</option>
                                    </select>
                                </div>
                                <div class="col-lg-6 col-md-12 mb-30">
                                    <label for="town">Phường/Xã <span>*</span></label>
                                    <select name="town" id="town">
                                        <option value="-1">Chọn phường xã</option>
                                    </select>
                                </div>
                                <div class="col-lg-12 col-md-12 mb-30">
                                    <label for="cart-town"> Thôn/xóm/số nhà <span>*</span></label>
                                    <input id="cart-town" placeholder="Nhập thôn/xóm/số nhà" type="text">
                                </div>
                                <div class="col-lg-12 col-md-12">
                                    <div class="row">
                                        <label class="col-lg-3 col-md-6 col-sm-6 mb-1"><input type="radio" id="rdoCash" name="paymentMethod" value="CASH" checked="checked" /> <span class="bank-title">Tiền mặt</span></label>
                                        <label class="col-sm-6 col-lg-3 col-md-6 mb-1"><input type="radio" id="rdoNL" name="paymentMethod" value="ONLINE" /> <span class="bank-title">Online</span></label>
                                    </div>
                                 
                                </div>
                                <div class="col-lg-12 col-md-12">
                                    <div class="order-notes">
                                        <label for="order_note">Ghi chú</label>
                                        <textarea id="order_note" style="height:70px" placeholder="Ghi chú"></textarea>
                                    </div>
                                </div>
                                <div class="col-12 mt-10">
                                    <button id="btnbill" type="submit">
                                        Xác nhận đơn hàng
                                    </button>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!--Checkout page section end-->
                </div>
            </div>
        </div>
        <!--coupon code area end-->
    </div>
}
<!--shopping cart area end -->
